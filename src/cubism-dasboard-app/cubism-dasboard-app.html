<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/iron-localstorage/iron-localstorage.html">
<link rel="import" href="../influxdb-connection/influxdb-connection.html">
<link rel="import" href="../influxdb-query/influxdb-query.html">
<link rel="import" href="../cubism-chart/cubism-chart.html">
<link rel="import" href="../well-names/well-names.html">

<dom-module id="cubism-dasboard-app">
  <template>
    <style>
      :host {
        display: block;
      }
    </style>
    
    <iron-localstorage name="cubism-connection" value="{{connection}}"
        on-iron-localstorage-load-empty="initializeConnection"></iron-localstorage>
    
    <influxdb-connection connection="{{connection}}"></influxdb-connection>
    <br/>
   
    <br/>
    <paper-button id="execute" raised>Show Wells</paper-button>
    <well-names id="wellNames" connection="[[connection]]" result="{{wellNames}}"></well-names> 
    
    [[wellNames]]
    <br/>
    [[result]]
    <br/>
    <br/>
    <cubism-chart></cubism-chart>
  </template>


  <script>
    Polymer({
      is: 'cubism-dasboard-app',
      
      listeners:{
        'execute.click':'executeClick'
      },
      
      properties: {
        prop1: {
          type: String,
          value: 'cubism-dasboard-app',
        },
      },
      initializeConnection: function() {
      this.connection = {
          url:'http://localhost:8086/query',
          user:'root',
          password:'root',
          db:'hfdata_samples'
      }
    },
      JSONstringify: function(conn){
        return JSON.stringify(conn, null, 2);
      },

      executeClick: function(){
        //this.$.query.handleQuery()
        this.$.wellNames.handleQuery()
      }

    });
  </script>
</dom-module>
