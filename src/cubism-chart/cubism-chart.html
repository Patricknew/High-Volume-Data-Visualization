<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<script src="../../bower_components/d3/d3.min.js"></script>
<script src="../../bower_components/cubism/cubism.v1.js"></script>
<dom-module id="cubism-chart">
<template>
	<style type="text/css">
		
	</style>

  <div id="example1">
    <paper-button id="showCubism" raised>Show Cubism</paper-button>
    [[wells]]
  </div>
  <script>
    function random(name) {
      var value = 0,
          values = [],
          i = 0,
          last;
      return context.metric(function(start, stop, step, callback) {
        start = +start, stop = +stop;
        if (isNaN(last)) last = start;
        while (last < stop) {
          last += step;
          value = Math.max(-10, Math.min(10, value + .8 * Math.random() - .4 + .2 * Math.cos(i += .2)));
          values.push(value);
        }
        callback(null, values = values.slice((start - stop) / step));
      }, name);
    }
    
    var context = cubism.context()
        .serverDelay(0)
        .clientDelay(0)
        .step(1e3)
        .size(960);
    var foo = random("foo"),
    bar = random("bar");

    d3.select("#example1").call(function(div) {

      div.append("div")
          .attr("class", "axis")
          .call(context.axis().orient("top"));

      div.selectAll(".horizon")
          .data([foo, bar, foo.add(bar), foo.subtract(bar)])
        .enter().append("div")
          .attr("class", "horizon")
          .call(context.horizon().extent([-20, 20]));

      div.append("div")
          .attr("class", "rule")
          .call(context.rule());

    });

  </script>
</template>
<script>

    Polymer({

      is: 'cubism-chart',

      listeners:{
        'showCubism.click': 'cubismClick',
      },

      properties: {
      	data: {
          type: Object,
        },
        wells: {
          type: Array
        }
      },

      cubismClick: function(){
        var wells=this.wells;
        console.log(wells);
      }
    });

  </script>
</dom-module>